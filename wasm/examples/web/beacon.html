<html>
    <head>
        <script type="module">
            import * as kaspa from '../../web/kaspa/kaspa_wasm.js';
            let { Beacon } = kaspa;
            (async () => {
                const wasm = await kaspa.default('../../web/kaspa/kaspa_wasm_bg.wasm');

                const beacon = new Beacon();

                const rpc = await beacon.connect("mainnet");
                console.log("Connected to", rpc.url);

                const info = await rpc.getBlockDagInfo();
                console.log("GetBlockDagInfo response:", info);

                let el = document.querySelector("body");
                el.innerHTML += "Connected to " + rpc.url + "\n\n";
                el.innerHTML += "GetBlockDagInfo response: " + JSON.stringify(info, null, 2);

                await rpc.disconnect();

            })();

        </script>
        <style>
            body {
                font-family: Consolas, monospace;
                white-space: pre;
            }
        </style>
    </head>
    <body></body>
</html>